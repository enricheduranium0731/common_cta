# CTA量化交易策略系统

一个基于多周期、多策略的自动化量化交易系统，支持回测和实盘交易。

## 📊 项目简介

本项目实现了一个完整的CTA（Commodity Trading Advisor）策略交易系统，采用多线程架构，支持多种技术指标和策略组合。系统可对接主流加密货币交易所，提供从数据获取、信号生成、订单执行到风险管理的全流程自动化交易解决方案。

**核心特性：**
- 支持9种交易策略，可灵活组合使用
- 多周期协同分析（15分钟至日线）
- 双模式运行：回测模式与实盘模式
- 智能止盈止损与风险控制系统
- 可视化交易结果展示
- 完整的交易日志与性能分析报告

## 🎯 交易策略列表

| 策略名称 | 代码标识 | 核心逻辑 | 适用周期 |
|---------|---------|---------|---------|
| **缠背驰策略** | `supertrend` | 基于连续上涨/下跌周期的趋势背驰判断 | 15m, 30m, 1h, 4h |
| **超级均线策略** | `superma` | 多周期均线多头排列/空头排列 | 15m, 30m, 1h, 4h, 1d |
| **趋势策略** | `trend` | 高低点比较判断趋势方向 | 15m, 30m, 1h, 4h |
| **布林带策略** | `bollb` | 布林带上下轨突破与带宽变化 | 15m, 30m, 1h, 4h |
| **MACD策略** | `macd` | MACD金叉/死叉信号 | 15m, 30m, 1h, 4h |
| **RSI策略** | `rsi` | RSI超买超卖区间突破 | 15m, 30m, 1h, 4h |
| **随机指标策略** | `stochastic` | KDJ随机指标交叉信号 | 15m, 30m, 1h |
| **反向均线策略** | `antima` | 短期均线下穿/上穿长期均线 | 15m, 30m, 1h |
| **SNN策略** | `snnok` | 自定义神经网络信号判断 | 4h |



### 线程模块说明

1. **数据采集线程** (`gatheringdata`/`gatheringtick`)
   - 回测模式：加载历史K线数据
   - 实盘模式：实时获取Tick数据

2. **订单检测线程** (`ordering`)
   - 执行策略信号检测
   - 生成买卖订单
   - 管理持仓状态

3. **自动平仓线程** (`auto_close`)
   - 监控持仓风险
   - 执行止盈止损
   - 技术信号平仓

## 📦 依赖库

```bash
pip install numpy pandas matplotlib mplfinance ccxt

## 📦 回测

python main.py <策略名称> <周期> <回测年数> test <数据库地址>
# 示例：使用所有策略在4小时周期回测2年历史数据
python main.py all 240 2 test localhost

## 📦 实盘
python main.py <策略名称> <周期> 0 real <数据库地址>
# 示例：使用缠背驰策略在1小时周期实盘交易
python main.py supertrend 60 0 real localhost

